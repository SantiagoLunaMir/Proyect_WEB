<h2 class="text-xl font-semibold mb-4">Piezas registradas</h2>

<table class="table-auto w-full border">
  <thead>
    <tr class="bg-gray-100 text-left">
      <th class="p-2">Nombre</th>
      <th class="p-2">Precio</th>
      <th class="p-2">Tiempo (días)</th>
      <th class="p-2">Publicar</th>
      <th class="p-2">Acciones</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let p of pieces" class="border-t">
      <td class="p-2">{{ p.name }}</td>
      <td class="p-2">{{ p.price | currency:'MXN' }}</td>
      <td class="p-2">{{ p.estimatedTime }}</td>

      <!-- Switch publicar/despublicar -->
      <td class="p-2">
        <input
          type="checkbox"
          [checked]="p.isPublic"
          (change)="onTogglePublish(p)"
        />
      </td>

      <td class="p-2">
        <button
          class="text-blue-600 hover:underline mr-2"
          (click)="edit(p._id!)">
          Editar
        </button>
        <button
          class="text-red-600 hover:underline"
          (click)="delete(p._id!)">
          Eliminar
        </button>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="loading" class="mt-4">Cargando…</div>
